function loadModPacks(){$("#packs").html('<div class="pack defaultAdd" onclick="showPackDialog();" title="Create Pack"><div class="text">CREATE PACK</div><div class="clear"></div></div>');for(var t=config.packs.length-1;t>=0;t--)$("#packs").prepend("<div class='pack' id='pack"+t+"' onclick='selectPack("+t+")' style='background-image: url("+config.packs[t].background+")' title='"+config.packs[t].name+"' oncontextmenu='event.preventDefault(); showContext(event.x, event.y, "+t+")'><div class='text'>"+config.packs[t].name+"</div><div class='clear'></div><div class='config fa fa-cog' onclick='event.stopPropagation(); configPack("+t+")'></div></div>")}function showContext(t,a,s){var c=new gui.Menu,e=new gui.MenuItem({label:"Edit"});e.click=function(){configPack(s)},c.append(e);var n=new gui.MenuItem({label:"Delete"});n.click=function(){config.packs.splice(s,1),save(),ajax("views/main.html")},c.append(n),c.popup(t,a)}function configPack(t){global.packId=t,$("#addPack").css({display:"block"}),$("#pack-content").html(""),$("#addPack .modal").addClass("slideInDown"),setModalActions("save-cancel"),setModalPage("views/configPack.html","Configuration for Pack #"+t)}function selectPack(t){var a=config.packs[t];"vanilla"==a.type&&($("#addPack").css({display:"block"}),$("#pack-content").html(""),$("#addPack .modal").addClass("slideInDown"),setModalActions("import-play-close"),setModalContent(["<div class='vanilla-container'>","	<div class='content'>","		<div class='info'>","		"+a.description,"			<hr>","			<h2>Minecraft Status</h2>","			<div class='status-container'>","				<div class='mc-status' status='minecraft.net'><div class='status'><div class='status-title'>Website</div><div class='status-text'>Checking...</div></div></div>","				<div class='mc-status' status='session.minecraft.net'><div class='status'><div class='status-title'>Sessions</div><div class='status-text'>Checking...</div></div></div>","				<div class='mc-status' status='account.mojang.com'><div class='status'><div class='status-title'>Accounts</div><div class='status-text'>Checking...</div></div></div>","				<div class='mc-status' status='skins.minecraft.net'><div class='status'><div class='status-title'>Skins</div><div class='status-text'>Checking...</div></div></div>","			</div>","			<div class='clear'></div>","		</div>","		<div class='clear'></div>","	</div>","</div>"].join("\n"),a.name,checkStatus),mcID=t)}function checkStatus(){lastStatusCheck<(new Date).getTime()-15e3?(request("https://status.mojang.com/check",function(t,a,s){mcStatus=JSON.parse(s),displayStatus()}),lastStatusCheck=(new Date).getTime()):displayStatus()}function startMinecraft(t){new Launcher(JSON.parse(fs.readFileSync("versions/"+config.packs[t].directory+"/"+config.packs[t].directory+".json")),"versions/"+config.packs[t].directory,config.minecraft.name,config.minecraft.uuid,config.minecraft.accessToken,config.minecraft.legacy?config.minecraft.legacy:!1).start(function(){},function(){},function(){})}function importLibs(){$("#addPack").css({display:"block"}),$("#pack-content").html(""),$("#addPack .modal").addClass("slideInDown"),setModalPage("views/importLibs.html")}function displayStatus(){try{if(mcStatus)for(var t=0;t<mcStatus.length;t++)mcStatus[t]&&0!==$("[status='"+Object.keys(mcStatus[t])[0]+"']").length&&($("[status='"+Object.keys(mcStatus[t])[0]+"'] .status-text").text("red"==mcStatus[t][Object.keys(mcStatus[t])[0]]?"Down":"Up"),$("[status='"+Object.keys(mcStatus[t])[0]+"']").attr("class","mc-status "+mcStatus[t][Object.keys(mcStatus[t])[0]]))}catch(a){$("[status] .status-text").text("Can't check"),$("[status]").attr("class","mc-status red")}}function setModalActions(t){$(".footer-actions").css({display:"none"}),$("#modal-"+t).css({display:"block"})}function setModalTitle(t){$("#pack-title").text(t)}function setModalPage(t,a){setModalTitle(a),$("#pack-content").removeAttr("class"),$("#pack-content").addClass("animated fadeOut"),setTimeout(function(){$("#pack-content").html(""),$.get(t,function(t){$("#pack-content").html(t),$("#pack-content").removeAttr("class"),$("#pack-content").addClass("animated fadeIn")})},1e3)}function setModalContent(t,a,s){setModalTitle(a),$("#pack-content").removeAttr("class"),$("#pack-content").addClass("animated fadeOut"),setTimeout(function(){$("#pack-content").html(t),$("#pack-content").removeAttr("class"),$("#pack-content").addClass("animated fadeIn"),s&&s()},1e3)}function showPackDialog(){$("#addPack").css({display:"block"}),$("#pack-content").html(""),$("#addPack .modal").addClass("slideInDown"),setModalActions("next-cancel"),setModalPage("views/createPack.html","Pack Creation")}function hidePackDialog(){$("#addPack").css({display:"none"}),$("#pack-content").html("")}var mcStatus,lastStatusCheck=0,Launcher=require("./public/js/minecraft-launcher.js"),gui=require("nw.gui"),mcID=0;loadModPacks(),$("#packs").sortable({items:".pack:not(.defaultAdd)",stop:function(){var t=config.packs,a=[],s=0;$("#packs .pack:not(.defaultAdd)").each(function(){var c=parseInt(this.id.substr(4));this.id="pack"+s,s++,a.push(t[c])}),config.packs=a,save()}}),$("#packs").disableSelection();